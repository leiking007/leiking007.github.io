{{ define "main" }}
<section class="mx-auto mt-6 grid max-w-[90rem] gap-6 px-4 md:px-6">
    <div class="p-2">
        {{- $category_key := lower .Title -}}
        {{- $displayName := $category_key -}}
        {{ range $term, $taxonomy := index site.Taxonomies $displayName }}
            <div class="my-4 p-4 border rounded-lg">
                <h3 class="text-lg font-semibold mb-3">
                    <a href="{{ $taxonomy.Page.RelPermalink }}">
                        {{ $taxonomy.Page.Title }} ({{ $taxonomy.Count }})
                    </a>
                </h3>

                <div class="space-y-2">
                    {{ range first 5 $taxonomy.Pages }}
                        <div class="pl-4">
                            <a href="{{ .RelPermalink }}">
                                {{ .Title }}
                            </a>
                            {{ if .Date }}
                                <span class="text-sm text-tl-base/75 ml-2">{{ .Date.Format (default "2006-01-02" .Site.Params.DateFormat) }}</span>
                            {{ end }}
                        </div>
                    {{ end }}

                    {{ if gt (len $taxonomy.Pages) 5 }}
                        <div class="pl-4 pt-2">
                            <a href="{{ $taxonomy.Page.RelPermalink }}" class="text-tl-secondary hover:text-tl-secondary/75 text-sm">
                                查看更多 ({{ sub (len $taxonomy.Pages) 5 }} 篇)
                            </a>
                        </div>
                    {{ end }}
                </div>
            </div>
        {{ end }}
    </div>
</section>
{{ end }}
