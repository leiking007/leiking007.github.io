<header class="lg:sticky top-0 z-10 flex h-16  py-3 shadow-sm bg-tl-base-100 ">
    <div class="mx-auto flex h-full w-full max-w-[90rem] justify-between px-4 lg:px-6">
        <div class="flex h-full gap-6">
            <div class="hidden lg:block mr-2 h-full">
                <a href="{{.Site.Home.RelPermalink}}" class="flex items-center space-x-3">
                    {{ partial "icons/icon" (dict "path" "common/logo" "className" "text-3xl" "processAttrs" false ) }}
                    <span class="self-center text-2xl font-semibold whitespace-nowrap ">Note</span>
                </a>
            </div>
            <!--    大屏菜单        -->
            <ul class="hidden items-center gap-8 lg:flex">
                {{ $currentPage := . }}
                {{ range .Site.Menus.main }}
                {{/* 判断当前页面url 和 菜单链接url是否相等，激活菜单 */}}
                {{ $active := eq (.URL | relLangURL) ($currentPage.RelPermalink | relLangURL) }}
                {{- if .Params.sub -}}
                <!-- 下拉菜单配置 -->
                <li x-data="{ open: false }" x-on:mouseover="open = true" x-on:mouseout="open = false"
                    class="relative cursor-pointer text-sm font-medium">
                    <button x-on:click="open =!open"
                            class="flex items-center justify-between w-full py-2 px-3 rounded-sm border-0 p-0 w-auto">
                        {{ with .Pre }}
                            {{ partial "icons/icon" (dict "path" . ) }}
                        {{ end }}{{ lower .Identifier | printf "widget.%s.title" | T | default .Name }}
                        {{ partial "icons/icon" (dict "path" "common/arrow-down" ) }}
                    </button>
                    <!-- Dropdown menu -->
                    <div x-show="open" x-cloak x-transition.duration.500ms
                         class="z-50 absolute top-12 left-8 font-normal bg-tl-base-100">
                        <ul class="py-2 text-sm">
                            {{- range .Params.sub -}}
                            <li class="text-nowrap">
                                <a href="{{ .url }}"
                                   {{ if eq (default false .newTab) true }}target="_blank" {{ end }}
                                   class="block px-4 py-2 hover:text-tl-primary ">
                                    {{ with .Pre }}
                                        {{ partial "icons/icon" (dict "path" . ) }}
                                    {{ end }}
                                    {{ .name }}
                                </a>
                            </li>
                            {{- end -}}
                        </ul>
                    </div>
                </li>
                {{ else }}
                <li class="relative cursor-pointer text-sm font-medium">
                    <a href="{{ .URL | relLangURL }}"
                       {{ if eq (default false .Params.newTab) true }}target="_blank" {{ end }}
                       class="inline-block py-2 px-3 rounded-sm border-0 hover:text-tl-primary p-0 {{ if $active }} text-tl-primary {{ end }}">
                        {{/* default DEFAULT input 如果获取的i8in为空，则默认设置.Name */}}
                        {{ with .Pre }}
                            {{ partial "icons/icon" (dict "path" . ) }}
                        {{ end }}
                        {{ lower .Identifier | printf "widget.%s.title" | T | default .Name }}
                    </a>
                </li>
                {{ end }}
                {{ end }}
            </ul>
            <!--     移动端菜单       -->
            <div class="lg:hidden" x-data="{open:false}">
                <button x-on:click="open = true" data-modal-toggle="default-modal" class="block">
                    {{ partial "icons/icon" (dict "path" "common/logo" "className" "text-3xl" "processAttrs" false ) }}
                </button>
                {{ define "_partials/header/mobile_title.html" }}
                        <a href="{{.Site.Home.RelPermalink}}">{{ .Site.Title }}</a>
                {{ end }}
                {{ define "_partials/header/mobile_content.html" }}
                        <div class="p-2 space-y-2">
                                {{ $currentPage := . }}
                                {{ range .Site.Menus.main }}
                                {{- if .Params.sub -}}
                                <div class="text-sm font-medium">
                                    {{ with .Pre }}
                                        {{ partial "icons/icon" (dict "path" . ) }}
                                    {{ end }}
                                    {{ lower .Identifier | printf "widget.%s.title" | T | default .Name }}
                                    <ul class="ml-6 mt-2">
                                        {{- range .Params.sub -}}
                                        <li>
                                            <a href="{{ .url }}"
                                               {{ if eq (default false .newTab) true }}target="_blank" {{ end }}
                                               class="block mt-1">
                                                {{ with .Pre }}
                                                    {{ partial "icons/icon" (dict "path" . ) }}
                                                {{ end }}
                                                {{ .name }}
                                            </a>
                                        </li>
                                        {{- end -}}
                                    </ul>
                                </div>
                                {{ else }}
                                <a href="{{ .URL | relLangURL }}"
                                   {{ if eq (default false .Params.newTab) true }}target="_blank" {{ end }}
                                   class="block rounded-sm">
                                    {{ with .Pre }}
                                        {{ partial "icons/icon" (dict "path" . ) }}
                                    {{ end }}
                                    {{ lower .Identifier | printf "widget.%s.title" | T | default .Name }}
                                </a>
                                {{ end }}

                                {{ end }}
                            </div>
                {{ end }}
                {{ partial "modal.html" (dict
                    "id"     "mobileModal"
                    "title"  (partial "header/mobile_title.html" .)
                    "size"   "md"
                    "position" "top"
                    "content" (partial "header/mobile_content.html" .)
                ) }}
            </div>
        </div>
        <div x-data="{open:false}" class="flex items-center">
            <!--搜索按钮-->
            <div x-on:click="open = true">
                {{ partial "icons/icon" (dict "path" "common/search" "className" "text-2xl hover:text-tl-primary" ) }}
            </div>
            {{ partial "modal.html" (dict
                "id"     "searchModal"
                "title"  "全站搜索"
                "size"   "md"
                "position" "top"
                "content" `<div id="search"></div>`
                ) }}
        </div>
    </div>
</header>

